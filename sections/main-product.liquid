<style>
  /* Oculta os dois primeiros parágrafos */
  #product-description-toggle-text > p:nth-child(1),
  #product-description-toggle-text > p:nth-child(2) {
    display: none;
  }

  /* Adiciona margem apenas entre os <p> visíveis, sem afetar o primeiro visível */
  #product-description-toggle-text > p + p {
    margin-top: 12px;
  }

  /* Remove margem do primeiro visível após os dois ocultos (caso herde de algum lugar) */
  #product-description-toggle-text > p:nth-child(3) {
    margin-top: 0 !important;
  }
</style>

<product-info
  id="MainProduct-{{ section.id }}"
  class="section-{{ section.id }}-padding"
  data-section="{{ section.id }}"
>
  
<script src="{{ 'product-form.js' | asset_url }}" defer="defer"></script>

  <div class="tw-bg-[white] tw-tracking-normal lg:tw-pt-[128px] tw-pt-[59px]">

    <div class="page-width tw-bg-[white]"> 

      <div class="tw-grid lg:tw-grid-cols-[2fr_1.5fr] tw-grid-cols-1"> 

        {% comment %} LEFT CONTENT {% endcomment %}
        <div class=" lg:tw-mb-[128px] tw-mb-[32px]">
          
          <div class="tw-w-full tw-sticky tw-top-[100px] tw-flex tw-flex-col">

            {% render 'swiper-gallery', product: product, section: section %}
            {% comment %} {% render 'swiper-gallery-no', product: product, section: section %} {% endcomment %}
          
      

            {% comment %} <div class="
              tw-relative 
              tw-w-screen 
              tw-left-1/2 
              tw-ml-[-50vw] 
              tw-mr-[-50vw] 
              tw-max-w-none 
              tw-flex 
              tw-justify-center 
              tw-items-center 
              tw-h-[347px] 
              tw-bg-[#F5F5F7] 
              tw-rounded-[12px] 
              
              tw-p-[100px]

              lg:tw-h-[566px] 
              md:tw-h-[650px]

              lg:tw-static 
              lg:tw-w-auto 
              lg:tw-ml-0 
              lg:tw-mr-0 
              lg:tw-left-auto

              tw-overflow-hidden
              ">
              <div class="tw-flex tw-w-full tw-justify-between tw-absolute tw-px-[32px]">

                <div 
                  id="prev-btn"
                  class="
                  tw-w-[60px] tw-h-[60px] tw-bg-[#C4CAD4] tw-rounded-[50px] 
                  tw-flex tw-flex-col tw-justify-center tw-items-center tw-cursor-pointer tw-select-none"
                  style="user-select: none; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;">
                  <img src="{{ "arrow-previous.svg" | asset_url }}" width="10" height="auto" style="pointer-events: none; user-select: none;">
                </div>

                <div 
                  id="next-btn"
                  class="
                  tw-w-[60px] tw-h-[60px] tw-bg-[#C4CAD4] tw-rounded-[50px] 
                  tw-flex tw-flex-col tw-justify-center tw-items-center tw-cursor-pointer tw-select-none"
                  style="user-select: none; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;">
                  <span><img src="{{ "arrow-next.svg" | asset_url }}" width="10" height="auto" style="pointer-events: none; user-select: none;"></span>
                </div>
              </div>
              
              <!-- Main Image Display -->
              <div id="main-image-container" style="user-select: none; -webkit-user-select: none;">
                {% if product.images.size > 0 %}
                  <img 
                    id="main-product-image"
                    src="{{ product.images[0] | image_url: width: 1000 }}" 
                    alt="{{ product.images[0].alt | escape }}" 
                    width="{{ product.images[0].width }}" 
                    height="{{ product.images[0].height }}" 
                    class="tw-w-full tw-rounded-[12px] tw-select-none" 
                    style="user-select: none; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; pointer-events: auto;"
                    draggable="false"
                  />
                {% endif %}
              </div>
            </div>
            
            <div class="tw-w-full tw-flex  tw-h-[80px] tw-justify-center tw-items-center tw-gap-[8px]">
              {% for image in product.images limit: 4 %}
                <div 
                  class="tw-flex tw-w-[60px] tw-h-[60px] tw-bg-[#f0f0f0] tw-items-center tw-justify-center tw-text-[12px] tw-leading-none tw-overflow-hidden tw-rounded-[8px] tw-cursor-pointer tw-select-none thumbnail-image"
                  data-image-index="{{ forloop.index0 }}"
                  data-image-url="{{ image | image_url: width: 1000 }}"
                  data-image-alt="{{ image.alt | escape }}"
                  style="user-select: none; -webkit-user-select: none;"
                >
                  <img 
                    src="{{ image | image_url: width: 60 }}" 
                    alt="{{ image.alt | escape }}" 
                    class="tw-w-full tw-h-full tw-object-cover tw-rounded-[8px] tw-select-none"
                    style="pointer-events: none; user-select: none;"
                    draggable="false"
                    width="auto"
                    height="auto"
                  />
                </div>
              {% endfor %}
            </div> {% endcomment %}
            
          </div>
        
        
        
        
  
        
        </div>

        {% comment %} RIGHT CONTENT {% endcomment %}
        <div class="tw-flex tw-flex-col tw-gap-[32px] tw-pb-[128px] tw-pl-[0px] lg:tw-pl-[48px]"> 

          <div class="tw-flex tw-flex-col tw-gap-[8px]">
            <h2 class="lg:tw-text-[32px] tw-text-[24px] tw-font-semibold tw-leading-none tw-tracking-normal">{{ product.title }}</h2>
            <div class="tw-flex tw-text-black tw-font-semibold">
              <img src="{{ "reviews-stars.svg" | asset_url }}" width="88" height="auto">
              (4.9)
            </div>
            <h2 class="tw-mt-[8px] lg:tw-text-[32px] tw-text-[24px] tw-font-semibold"> {{ product.price | money_without_trailing_zeros }} </h2>
          </div>

          {% comment %}
            Calcula a data de entrega (7 dias úteis a partir de hoje)
          {% endcomment %}
          {% assign today = 'now' | date: '%s' %}
          {% assign delivery_date = today %}
          {% assign business_days_added = 0 %}
          {% assign days_to_add = 7 %}

          {% comment %} Loop para adicionar dias úteis {% endcomment %}
          {% for i in (1..14) %}
            {% if business_days_added < days_to_add %}
              {% assign delivery_date = delivery_date | plus: 86400 %}
              {% assign day_of_week = delivery_date | date: '%w' %}
              {% if day_of_week != '0' and day_of_week != '6' %}
                {% assign business_days_added = business_days_added | plus: 1 %}
              {% endif %}
            {% endif %}
          {% endfor %}

          {% assign delivery_day = delivery_date | date: '%A' %}
          {% assign delivery_month = delivery_date | date: '%B' %}
          {% assign delivery_number = delivery_date | date: '%d' %}

          <div class="tw-text-[#383838] lg:tw-text-[15px] tw-text-[13px] tw-flex tw-items-center tw-gap-[8px]">
            <img src="{{ 'delivery-shipping.svg' | asset_url }}" width="18" height="auto" alt="Delivery">
            Delivery <span class="tw-font-semibold tw-text-[black]">{{ delivery_day }}, {{ delivery_month }} {{ delivery_number }}.</span> Order within <span id="countdown" class="tw-text-[#259E5B] tw-font-semibold">16 hrs 38mins</span>
          </div>

          <div id="short-description" class="tw-flex tw-flex-col tw-gap-[8px]">
            <p class="tw-font-semibold tw-text-black tw-text-[16px] lg:tw-text-[16px]">{{ product.metafields.custom.groov_heading }}</p>
            <p class="tw-font-normal tw-text-[#4D5056] tw-text-[16px] lg:tw-text-[16px] ">{{ product.metafields.custom.groov_description }}</p>
          </div>

<!-- ========== SEÇÃO ADD TO CART COM SNIPPET ORIGINAL ========== -->
<div id="ATC" class="tw-flex tw-flex-col tw-gap-[14px]">
  {%- assign product_form_id = 'product-form-' | append: section.id -%}

  <div class="product__info-wrapper tw-relative">
    <div class="tw-flex tw-flex-col tw-gap-[14px]">
      {%- assign product_form_id = 'product-form-' | append: section.id -%}
  
      <div>
        {%- render 'buy-buttons',
          product: product,
          product_form_id: product_form_id,
          section_id: section.id,
          show_pickup_availability: true
        -%}
      </div>

      {% comment %} <button 
        {% comment %} type="submit" 
        form="{{ product_form_id }}" {% endcomment %}
        class="tw-bg-[black] tw-px-[24px] tw-py-[10px] tw-text-white tw-rounded-full tw-text-center lg:tw-text-[18px] tw-text-[16px] hover:tw-bg-gray-800 tw-transition-colors custom-product-form">
        Add to cart
      </button> {% endcomment %}

  
      <div class="tw-flex tw-items-center tw-justify-center tw-gap-[8px] tw-text-[#505C72] tw-text-[14px]">
        <img src="{{ "secure-18.svg" | asset_url }}" width="18" height="auto">
         Secure Checkout
         <img src="{{ "payments.svg" | asset_url }}" width="auto" height="20" class="tw-ml-[18px]">
      </div>
    </div>
  </div>
  
  
  {% comment %} {%- render 'buy-buttons',
    product: product,
    product_form_id: product_form_id,
    section_id: section.id,
    show_pickup_availability: true
  -%} {% endcomment %}

  {% comment %} <div class="tw-flex tw-items-center tw-justify-center tw-gap-[8px] tw-text-[#505C72] tw-text-[14px]">
    <img src="{{ "secure-18.svg" | asset_url }}" width="18" height="auto" >
     Secure Checkout
     <img src="{{ "payments.svg" | asset_url }}" width="auto" height="20" class="tw-ml-[18px]">
  </div> {% endcomment %}
</div>
<!-- ========== FIM SEÇÃO ADD TO CART ========== -->

          <div id="description" class="tw-relative">
            <p class="tw-font-semibold tw-text-black tw-mb-[16px]">Description</p>
           <div 
            id="product-description-toggle-text" 
            class="tw-leading-[24px] tw-line-clamp-[5]"
          >
            {{ product.description }}
          </div>

            <!-- Gradiente -->
            <div 
              id="product-description-fade"
              class="tw-h-[80px] tw-w-full tw-absolute tw-bottom-[56px]"
              style="background: linear-gradient(180deg, rgba(255, 255, 255, 0.00) 11.11%, #FFF 100%);">
            </div>
          
            <!-- Botão -->
            <button 
              id="product-description-toggle-btn"
              class="tw-w-full tw-flex tw-justify-center tw-items-center tw-pt-[24px] tw-pb-[32px] tw-border-b tw-border-[#DCDCDC] tw-font-semibold tw-text-[black] gap-[8px]">
              Show More <img src="{{ 'arrow-down.svg' | asset_url }}" width="auto" height="24" />
            </button>
          </div>

          <!-- Resto do conteúdo mantido igual... -->
          <div id="attribute-breakdown">
            <p class="tw-font-semibold tw-text-black">Attribute Breakdown</p>
            <img src="{{ "attribute-everyday.svg" | asset_url}}" width="589" height="auto" class="tw-mx-auto">
          </div>

           <div id="testimonialss">
            <p class="tw-font-semibold tw-text-black tw-mb-[18px]">What are people saying?</p>
            <div id="testimonial-new" class="tw-flex tw-p-[24px] tw-flex-col tw-bg-[#F5F5F7] tw-w-full tw-gap-[24px] tw-rounded-[8px]">
                <div class="tw-flex tw-justify-between">
                   <div class="tw-flex tw-gap-[8px]">
                      <img src="{{ "person.png" | asset_url }}" width="32" height="32" class="tw-w-[32px] tw-h-[32px]">
                      <div class="tw-flex tw-flex-col tw-justify-center">
                        <p class="tw-text-black tw-text-[14px] tw-leading-tight">Elizabeth</p>
                        <p class="tw-text-[#4A526F] tw-text-[12px] tw-leading-tight">Filmmaker & Activist</p>
                      </div>
                   </div>
                    <img src="{{ "reviews-blue.svg" | asset_url }}" width="93" height="auto">
                </div>
                <p class="tw-text-[15px] tw-text-[#4A526F]">
                  OMG. <span class="tw-text-black tw-font-semibold">It's like I'm walking on clouds.</span> I've tried both medical orthotics and off-the-shelf inserts in the past and neither came close to being as comfortable as my Groovs
                </p>
            </div>
           </div>

           
           <div id="testimonial-videos">
            <p class="tw-font-semibold tw-text-black tw-mb-[18px]">Join our happy customers</p>
            <div class="tw-grid tw-grid-cols-3 tw-gap-[20px]">
              <div
                class="
                  tw-h-[215px] tw-w-full tw-flex tw-justify-center tw-items-center tw-rounded-[8px]
                  tw-bg-cover tw-bg-center
                "
                style="background-image: url({{ 'video-01.png' | asset_url }})"
              >
                <button><img src="{{  "btn-play-40.svg" | asset_url }}" width="50" height="50"></button>
              </div>

              <div
                class="
                  tw-h-[215px] tw-w-full tw-flex tw-justify-center tw-items-center tw-rounded-[8px]
                  tw-bg-cover tw-bg-center
                "
                style="background-image: url({{ 'video-02.png' | asset_url }})"
              >
                <button><img src="{{  "btn-play-40.svg" | asset_url }}" width="50" height="50"></button>
              </div>

              <div
                class="
                  tw-h-[215px] tw-w-full tw-flex tw-justify-center tw-items-center tw-rounded-[8px]
                  tw-bg-cover tw-bg-center
                "
                style="background-image: url({{ 'video-03.png' | asset_url }})"
              >
                <button><img src="{{  "btn-play-40.svg" | asset_url }}" width="50" height="50"></button>
              </div>
            </div>
          </div>

          <div id="benefits-icons" class="tw-flex tw-flex-col tw-gap-[16px]">
            <div class="tw-flex tw-flex-row tw-gap-[12px]">
              <img src="{{ "free-shipping-icon.svg"| asset_url }}" width="24" height="24">

              <div class="tw-flex tw-flex-col">
                <span class="tw-text-[#1D1D1F] tw-font-semibold tw-text-[14px] tw-leading-tight"
                  >Free Shipping Worldwide</span
                >
                <span class="tw-text-[#4A526F] tw-text-[13px] tw-leading-tight">Estimated dispatch within 7 days</span>
              </div>
            </div>

            <hr class="tw-border-t tw-border-[#D5D5D5] tw-border-t-[1px] tw-m-0">

            <div class="tw-flex tw-flex-row tw-gap-[12px]">
              <img src="{{ "signature-icon.svg"| asset_url }}" width="24" height="24">

              <div class="tw-flex tw-flex-col">
                <span class="tw-text-[#1D1D1F] tw-font-semibold tw-text-[14px] tw-leading-tight"
                  >Free Shipping Worldwide</span
                >
                <span class="tw-text-[#4A526F] tw-text-[13px] tw-leading-tight">Estimated dispatch within 7 days</span>
              </div>
            </div>

            <hr class="tw-border-t tw-border-[#D5D5D5] tw-border-t-[1px] tw-m-0">

            <div class="tw-flex tw-flex-row tw-gap-[12px]">
              <img src="{{ "shapesense-icon.svg"| asset_url }}" width="24" height="24">

              <div class="tw-flex tw-flex-col">
                <span class="tw-text-[#1D1D1F] tw-font-semibold tw-text-[14px] tw-leading-tight"
                  >Free Shipping Worldwide</span
                >
                <span class="tw-text-[#4A526F] tw-text-[13px] tw-leading-tight">Estimated dispatch within 7 days</span>
              </div>
            </div>
          </div>

          <div
            id="quiz"
            class="tw-flex tw-row tw-bg-[#F5F5F7] tw-px-[18px] tw-py-[14px] tw-w-full tw-gap-[14px] tw-items-center tw-rounded-[8px] " >
            <img src="{{  "support-groov.png"  | asset_url}}" width="40" height="40" class="tw-w-[40px] tw-h-[40px]">
            <div class="tw-flex tw-flex-col tw-h-fit">
              <p class="tw-text-[#2F2F39] tw-text-[14px] tw-font-semibold">Not sure which insole is right for you?</p>
              <a href="#" class="tw-text-[#046CC8] tw-flex tw-gap-[4px] tw-text-[13px]">
                Take the quiz now
                <img src="{{  "mini-arrow.svg"  | asset_url}}" width="auto" height="18" class="tw-w-[8px] tw-mt-[2px]">
              </a>
            </div>
          </div>

          <div id="video-card" class="tw-flex tw-rounded-[12px] tw-overflow-hidden tw-bg-[#F5F5F7]">
            <div
              class="tw-h-[123px] tw-min-w-[120px] tw-bg-cover tw-bg-center tw-relative"
              style="background-image: url({{ 'video-play-bg-new.png' | asset_url }});"
            >
              <img
                src="{{ 'video-play-icon-new.svg' | asset_url }}"
                alt="Play Icon"
                class="tw-w-[44px] tw-h-[44px] tw-absolute tw-top-1/2 tw-left-1/2 tw-transform tw--translate-x-1/2 tw--translate-y-1/2"
                width="auto"
                height="auto"
              >
            </div>

            <div class="tw-flex tw-flex-col tw-items-center tw-justify-center tw-px-[32px] ">
              <div class="tw-flex tw-flex-col tw-gap-[4px]">
                <h4 class="tw-text-[14px] tw-font-semibold tw-text-[#303030] tw-tracking-normal">How it works</h4>
                <p class="tw-text-[#475C71] tw-text-[14px]">
                  See how quick it is to scan your feet and get your custom insoles delivered in just days.
                </p>
              </div>
            </div>
          </div>

          <!-- JavaScript para troca de imagens (popup gerenciado pelo snippet) -->
          <script>
            document.addEventListener('DOMContentLoaded', function() {
              // ===== CÓDIGO ORIGINAL DE IMAGENS =====
              // Countdown (original)
              function updateCountdown() {
                const now = new Date();
                const endOfDay = new Date(now);
                endOfDay.setHours(23, 59, 59, 999);
                
                const timeLeft = endOfDay - now;
                
                if (timeLeft > 0) {
                  const hours = Math.floor(timeLeft / (1000 * 60 * 60));
                  const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                  
                  const countdownElement = document.getElementById('countdown');
                  if (countdownElement) {
                    countdownElement.textContent = `${hours} hrs ${minutes} mins`;
                  }
                }
              }
              
              updateCountdown();
              setInterval(updateCountdown, 60000);

              // Description toggle (original)
              const paragraph = document.getElementById('product-description-toggle-text');
              const fade = document.getElementById('product-description-fade');
              const button = document.getElementById('product-description-toggle-btn');
            
              let expanded = false;
            
              if (button) {
                button.addEventListener('click', () => {
                  expanded = !expanded;
            
                  paragraph.classList.toggle('tw-line-clamp-[5]');
                  fade.style.display = expanded ? 'none' : 'block';
                  button.innerHTML = expanded 
                    ? 'Show Less <img src="{{ "arrow-up.svg" | asset_url }}" width="auto" height="24" />' 
                    : 'Show More <img src="{{ "arrow-down.svg" | asset_url }}" width="auto" height="24" />';
                });
              }


            });
          </script>

        </div>
      </div>
    </div>
  </div>

  {% case product.handle %}
    {% when 'the-everyday' %}
      {% render 'content-the-everyday' %}
    {% when 'the-luxe' %}
      {% render 'content-the-luxe' %}
    {% when 'the-perfomance' %}
      {% render 'content-perfomance' %}
  {% endcase %}

</product-info>

<!-- STICKY CART (mantido igual) -->
<div 
  id="sticky-cart"
  class="tw-fixed tw-bottom-0 tw-w-full tw-bg-[white] tw-z-50 tw-py-[16px] tw-transform tw-translate-y-full tw-transition-transform tw-duration-300 tw-ease-in-out tw-opacity-0"
  style="box-shadow: 0 -3px 32px 0 rgba(31, 38, 51, 0.07)">
  
  <div class="page-width">
    <div class="tw-flex tw-justify-between tw-items-center">
      <p class="tw-text-[16px] tw-text-[#3f454f] tw-tracking-normal">{{ product.title }}</p>

      <div class="tw-flex tw-gap-[24px] tw-items-center">
        <p class="tw-text-[18px] tw-font-semibold tw-text-black">{{ product.price | money_without_trailing_zeros }}</p>
        <button 
          {% comment %} type="submit"  {% endcomment %}
          {% comment %} form="{{ product_form_id }}" {% endcomment %}
          class="tw-bg-[black] tw-px-[24px] tw-py-[10px] tw-text-white tw-rounded-full tw-text-center lg:tw-text-[18px] tw-text-[16px] hover:tw-bg-gray-800 tw-transition-colors custom-product-form">
          Add to cart
        </button>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
      const stickyCart = document.getElementById('sticky-cart');
      const scrollThreshold = 1000;
      let isVisible = false;
  
      function handleScroll() {
          const scrollY = window.scrollY;
          
          if (scrollY >= scrollThreshold && !isVisible) {
              // Mostrar o cart
              stickyCart.classList.remove('tw-translate-y-full', 'tw-opacity-0');
              stickyCart.classList.add('tw-translate-y-0', 'tw-opacity-100');
              isVisible = true;
          } else if (scrollY < scrollThreshold && isVisible) {
              // Esconder o cart - FORÇA as classes para garantir transição suave
              stickyCart.classList.remove('tw-translate-y-0', 'tw-opacity-100');
              stickyCart.classList.add('tw-translate-y-full', 'tw-opacity-0');
              isVisible = false;
          }
      }
  
      // Versão com requestAnimationFrame mais controlada
      let ticking = false;
      
      function requestTick() {
          if (!ticking) {
              ticking = true;
              requestAnimationFrame(() => {
                  handleScroll();
                  ticking = false;
              });
          }
      }
  
      window.addEventListener('scroll', requestTick);
  });
</script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const addToCartButtons = document.querySelectorAll('.custom-product-form');

    addToCartButtons.forEach(button => {
      button.addEventListener('click', () => {
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      });
    });
  });
</script>

{% schema %}
{
  "name": "Main Product",
  "settings": [],
  "blocks": [
    {
      "type": "groov_content",
      "name": "Groov Content",
      "settings": [
        {
          "type": "text",
          "id": "groov_heading",
          "label": "Groov Heading",
          "default": "Elegant. Compact. Perfect for Snug Shoes."
        },
        {
          "type": "textarea",
          "id": "groov_description",
          "label": "Groov Description",
          "default": "Your custom pair of The Luxe, by Groov is crafted with a thin finish that tapers before the toes for an easy fit in even your tightest shoes (and those that don't have removable insoles)."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Main Product",
      "blocks": [
        {
          "type": "groov_content"
        }
      ]
    }
  ]
}
{% endschema %}